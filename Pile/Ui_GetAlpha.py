# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'e:\Python\Pile\GetAlpha.ui'
#
# Created by: PyQt5 UI code generator 5.15.2
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from CAltools import Tools


class Ui_Dialog(object):
    def setupUi(self, Dialog):
        Dialog.setObjectName("Dialog")
        Dialog.resize(804, 602)
        self.buttonBox = QtWidgets.QDialogButtonBox(Dialog)
        self.buttonBox.setGeometry(QtCore.QRect(430, 550, 341, 32))
        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)
        self.buttonBox.setStandardButtons(QtWidgets.QDialogButtonBox.Cancel|QtWidgets.QDialogButtonBox.Ok)
        self.buttonBox.setObjectName("buttonBox")
        self.layoutWidget = QtWidgets.QWidget(Dialog)
        self.layoutWidget.setGeometry(QtCore.QRect(10, 30, 539, 94))
        self.layoutWidget.setObjectName("layoutWidget")
        self.gridLayout = QtWidgets.QGridLayout(self.layoutWidget)
        self.gridLayout.setContentsMargins(0, 0, 0, 0)
        self.gridLayout.setObjectName("gridLayout")
        self.label_6 = QtWidgets.QLabel(self.layoutWidget)
        self.label_6.setObjectName("label_6")
        self.gridLayout.addWidget(self.label_6, 1, 4, 1, 1)
        self.label_5 = QtWidgets.QLabel(self.layoutWidget)
        self.label_5.setObjectName("label_5")
        self.gridLayout.addWidget(self.label_5, 0, 4, 1, 1)
        self.label_2 = QtWidgets.QLabel(self.layoutWidget)
        self.label_2.setObjectName("label_2")
        self.gridLayout.addWidget(self.label_2, 1, 0, 1, 1)
        self.piled = QtWidgets.QLineEdit(self.layoutWidget)
        self.piled.setObjectName("piled")
        self.gridLayout.addWidget(self.piled, 0, 5, 1, 1)
        self.gjn = QtWidgets.QLineEdit(self.layoutWidget)
        self.gjn.setObjectName("gjn")
        self.gridLayout.addWidget(self.gjn, 1, 3, 1, 1)
        self.hntleavel = QtWidgets.QComboBox(self.layoutWidget)
        self.hntleavel.setObjectName("hntleavel")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.hntleavel.addItem("")
        self.gridLayout.addWidget(self.hntleavel, 0, 1, 1, 1)
        self.gjd = QtWidgets.QLineEdit(self.layoutWidget)
        self.gjd.setObjectName("gjd")
        self.gridLayout.addWidget(self.gjd, 1, 1, 1, 1)
        self.label_4 = QtWidgets.QLabel(self.layoutWidget)
        self.label_4.setObjectName("label_4")
        self.gridLayout.addWidget(self.label_4, 1, 2, 1, 1)
        self.label_3 = QtWidgets.QLabel(self.layoutWidget)
        self.label_3.setObjectName("label_3")
        self.gridLayout.addWidget(self.label_3, 0, 2, 1, 1)
        self.gjleveal = QtWidgets.QComboBox(self.layoutWidget)
        self.gjleveal.setObjectName("gjleveal")
        self.gjleveal.addItem("")
        self.gjleveal.addItem("")
        self.gjleveal.addItem("")
        self.gjleveal.addItem("")
        self.gjleveal.addItem("")
        self.gjleveal.addItem("")
        self.gjleveal.addItem("")
        self.gridLayout.addWidget(self.gjleveal, 0, 3, 1, 1)
        self.lineEdit_6 = QtWidgets.QLineEdit(self.layoutWidget)
        self.lineEdit_6.setObjectName("lineEdit_6")
        self.gridLayout.addWidget(self.lineEdit_6, 1, 5, 1, 1)
        self.label = QtWidgets.QLabel(self.layoutWidget)
        self.label.setObjectName("label")
        self.gridLayout.addWidget(self.label, 0, 0, 1, 1)
        self.gjd_3 = QtWidgets.QLineEdit(self.layoutWidget)
        self.gjd_3.setObjectName("gjd_3")
        self.gridLayout.addWidget(self.gjd_3, 2, 1, 1, 1)
        self.m0_2 = QtWidgets.QLabel(self.layoutWidget)
        self.m0_2.setTextFormat(QtCore.Qt.MarkdownText)
        self.m0_2.setObjectName("m0_2")
        self.gridLayout.addWidget(self.m0_2, 2, 0, 1, 1)
        self.textBrowser = QtWidgets.QTextBrowser(Dialog)
        self.textBrowser.setGeometry(QtCore.QRect(10, 310, 791, 192))
        self.textBrowser.setObjectName("textBrowser")

        self.retranslateUi(Dialog)
        self.buttonBox.accepted.connect(self.cal)
        self.buttonBox.rejected.connect(Dialog.reject)
        QtCore.QMetaObject.connectSlotsByName(Dialog)

    def retranslateUi(self, Dialog):
        _translate = QtCore.QCoreApplication.translate
        Dialog.setWindowTitle(_translate("Dialog", "Dialog"))
        self.label_6.setText(_translate("Dialog", "保护层厚度（mm）"))
        self.label_5.setText(_translate("Dialog", "桩径（mm）"))
        self.label_2.setText(_translate("Dialog", "钢筋直径（mm）"))
        self.piled.setText(_translate("Dialog", "800"))
        self.gjn.setText(_translate("Dialog", "10"))
        self.hntleavel.setItemText(0, _translate("Dialog", "C15"))
        self.hntleavel.setItemText(1, _translate("Dialog", "C20"))
        self.hntleavel.setItemText(2, _translate("Dialog", "C25"))
        self.hntleavel.setItemText(3, _translate("Dialog", "C30"))
        self.hntleavel.setItemText(4, _translate("Dialog", "C35"))
        self.hntleavel.setItemText(5, _translate("Dialog", "C40"))
        self.hntleavel.setItemText(6, _translate("Dialog", "C45"))
        self.hntleavel.setItemText(7, _translate("Dialog", "C50"))
        self.hntleavel.setItemText(8, _translate("Dialog", "C55"))
        self.hntleavel.setItemText(9, _translate("Dialog", "C60"))
        self.hntleavel.setItemText(10, _translate("Dialog", "C65"))
        self.hntleavel.setItemText(11, _translate("Dialog", "C70"))
        self.hntleavel.setItemText(12, _translate("Dialog", "C75"))
        self.hntleavel.setItemText(13, _translate("Dialog", "C80"))
        self.gjd.setText(_translate("Dialog", "20"))
        self.label_4.setText(_translate("Dialog", "钢筋根数"))
        self.label_3.setText(_translate("Dialog", "钢筋等级"))
        self.gjleveal.setItemText(0, _translate("Dialog", "HPB300"))
        self.gjleveal.setItemText(1, _translate("Dialog", "HRB335"))
        self.gjleveal.setItemText(2, _translate("Dialog", "HRB400"))
        self.gjleveal.setItemText(3, _translate("Dialog", "HRBF400"))
        self.gjleveal.setItemText(4, _translate("Dialog", "RRB400"))
        self.gjleveal.setItemText(5, _translate("Dialog", "HRB500"))
        self.gjleveal.setItemText(6, _translate("Dialog", "HRBF500"))
        self.lineEdit_6.setText(_translate("Dialog", "50"))
        self.label.setText(_translate("Dialog", "混凝土等级"))
        self.gjd_3.setText(_translate("Dialog", "6"))
        self.m0_2.setText(_translate("Dialog", "水平抗力系数比例系数(MN/m^4)"))

    def cal(self):
        self.tool=Tools()
        phg=self.tool.Getphg(int(self.gjd.text()),int(self.gjn.text()),int(self.piled.text()))
        self.textBrowser.setText("")
        self.textBrowser.append(phg["msg"])
        hnt=self.tool.GetHnt(self.hntleavel.currentText())
        gj=self.tool.GetGj(self.gjleveal.currentText())
        self.textBrowser.append("混凝土的弹性模量E=%s MPa"%(hnt['E']))
        self.textBrowser.append("钢筋的弹性模量E=%s MPa"%(gj['E']))
        d=int(self.piled.text())
        ae=gj['E']/hnt['E']
        pg=phg['pg']
        d0=int(self.piled.text())-2*int(self.lineEdit_6.text())
        W0=self.tool.GetW0(d,ae,pg,d0)*1e-9
        self.textBrowser.append("桩身截面受拉的截面模量W0=pi*d*(d*d+2*(ae-1)*pg*d0*d0)/32=pi*%s*(%s*%s+2*(%s-1)*%s*%s*%s)/32=%s"%(d*1e-3,d*1e-3,d*1e-3,ae,pg,d0*1e-3,d0*1e-3,W0))
        I0=W0*1e-3*d0/2#转换单位
        self.EI=0.85*hnt['E']*I0*1000
        self.textBrowser.append("桩刚度EI=%s"%(self.EI))
        m0=float(self.gjd_3.text())*1000
        b0=0
        if d<1:
            b0=0.9*(1.5*d/1000+0.5)
        else:
            b0=0.9*(d/1000+1)
        self.textBrowser.append("桩身计算宽度b0=%s"%(b0))
        self.alpha=pow(m0*b0/self.EI,1/5)
        self.textBrowser.append("水平位移系数α=%s"%(self.alpha))
